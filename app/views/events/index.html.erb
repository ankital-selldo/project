<div class="container mt-5">
  <h1 class="text-center mb-4 text-primary">List of Events</h1>
  <div class="row">
    <% @events.each do |event| %>
      <div class="col-md-4 mb-4">
        <div class="card shadow-lg border-light rounded event-card-hover">
          <% if event.event_image.present? %>
            <img src="<%= event.event_image %>" class="card-img-top" alt="<%= event.event_name %>" style="object-fit: cover; height: 200px;">
          <% else %>
            <div class="card-img-top bg-secondary text-white text-center d-flex justify-content-center align-items-center" style="height: 200px;">
              <i class="fas fa-calendar-alt fa-3x"></i>
            </div> 
          <% end %>
          <div class="card-body">
            <h5 class="card-title text-center text-uppercase font-weight-bold" style="color: #007bff;"><%= event.event_name %></h5>
            <p class="card-text text-justify text-muted">
              <% truncated_desc = truncate(event.event_desc, length: 100, separator: ' ') %>
              <%= truncated_desc %>
              <% if event.event_desc.length > 100 %>
                <a href="#" data-bs-toggle="collapse" data-bs-target="#desc<%= event.id %>" aria-expanded="false" aria-controls="desc<%= event.id %>">
                  Read More
                </a>
                <div class="collapse" id="desc<%= event.id %>">
                  <%= event.event_desc.gsub(truncated_desc, '') %>
                </div>
              <% end %>
            </p>
            <ul class="list-group list-group-flush">
              <li class="list-group-item"><strong>Venue:</strong> <%= event.event_venue %></li>
              <li class="list-group-item"><strong>Date:</strong> <%= event.event_date&.strftime('%Y-%m-%d') %></li>
              <li class="list-group-item"><strong>Time:</strong> <%= event.event_time&.strftime('%I:%M %p') %></li>
            </ul>
            <div class="d-flex justify-content-between align-items-center mt-3">
              <%= link_to "Register", new_register_path(event_id: event.id), class: "btn btn-primary btn-sm" %>
              <%= link_to "Manage Event", event_path(event), class: "btn btn-primary btn-sm" %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>

<style>
  .event-card-hover {
    transition: box-shadow 0.3s ease;
  }
  .event-card-hover:hover {
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
  }
</style>